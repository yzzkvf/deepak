function calculateExperience(){const e=new Date(2011,7,1),t=new Date;let n=t.getFullYear()-e.getFullYear();const o=t.getMonth()-e.getMonth();(o<0||0===o&&t.getDate()<e.getDate())&&n--;const a=document.getElementById("years-experience");a&&(a.textContent=n+"+")}function handleResumeDownload(){const e=document.createElement("a");e.href="resources/deepak_resume.pdf",e.download="deepak_resume.pdf",document.body.appendChild(e),e.click(),document.body.removeChild(e)}function decode(e){try{return atob(e)}catch(e){return console.error("Failed to decode string:",e),""}}function setupScratchCards(){document.querySelectorAll(".scratch-container").forEach(e=>{const t=e.querySelector(".scratch-canvas"),n=e.querySelector(".scratch-content"),o=n.querySelector(".contact-text"),a=t.getContext("2d");let i=!1;o.textContent=decode(n.dataset.value),a.fillStyle="#1C1C1E",a.fillRect(0,0,t.width,t.height),e.dataset.revealed="false";const r=(e,t)=>{i&&(a.globalCompositeOperation="destination-out",a.beginPath(),a.arc(e,t,12,0,2*Math.PI),a.fill())},s=e=>{i=!0;const t=e.target.getBoundingClientRect(),n=(e.touches?e.touches[0].clientX:e.clientX)-t.left,o=(e.touches?e.touches[0].clientY:e.clientY)-t.top;r(n,o)},l=e=>{if(!i)return;e.preventDefault();const t=e.target.getBoundingClientRect(),n=(e.touches?e.touches[0].clientX:e.clientX)-t.left,o=(e.touches?e.touches[0].clientY:e.clientY)-t.top;r(n,o)},d=()=>{i&&(i=!1,(()=>{const n=a.getImageData(0,0,t.width,t.height).data;let o=0;for(let e=3;e<n.length;e+=4)0===n[e]&&o++;o/(t.width*t.height)*100>50&&(e.dataset.revealed="true",t.style.transition="opacity 0.5s",t.style.opacity="0")})())};t.addEventListener("mousedown",s),t.addEventListener("mousemove",l),t.addEventListener("mouseup",d),t.addEventListener("mouseleave",d),t.addEventListener("touchstart",s,{passive:!0}),t.addEventListener("touchmove",l,{passive:!1}),t.addEventListener("touchend",d),e.addEventListener("click",t=>{if("true"!==e.dataset.revealed)return void t.preventDefault();const o=n.dataset.type,a=decode(n.dataset.value);"tel"===o&&(window.location.href=`tel:${a}`),"mailto"===o&&(window.location.href=`mailto:${a}`)})})}function setupQuizModal(){const e=document.getElementById("quiz-modal"),t=document.getElementById("show-quiz-button"),n=document.getElementById("close-quiz-button"),o=document.getElementById("submit-quiz-button"),a=document.getElementById("quiz-answer"),i=document.getElementById("quiz-feedback"),r=e.querySelector("p");let s=null;const l=[{question:"What is 7 * 8?",answer:"56"},{question:"What is 12 + 19?",answer:"31"},{question:"What is 100 - 45?",answer:"55"},{question:"What is 5 * 5 + 10?",answer:"35"},{question:"What is (10 - 2) * 4?",answer:"32"}],d=()=>{e.classList.remove("modal-visible"),setTimeout(()=>e.classList.add("modal-hidden"),300),i.textContent="",a.value=""},c=()=>{a.value.trim()===s?(i.textContent="Correct! Downloading...",i.style.color="#22c55e",setTimeout(()=>{handleResumeDownload(),d()},1e3)):(i.textContent="Not quite. Give it another try!",i.style.color="#ef4444",a.value="",a.focus())};t.addEventListener("click",()=>{const t=l[Math.floor(Math.random()*l.length)];r.textContent=t.question,s=t.answer,e.classList.remove("modal-hidden"),e.classList.add("modal-visible"),a.focus()}),n.addEventListener("click",d),o.addEventListener("click",c),window.addEventListener("click",t=>{t.target===e&&d()}),a.addEventListener("keyup",e=>{"Enter"===e.key&&c()})}function setupDevToolsDetection(){let e=!1;const t=()=>{const t=window.outerWidth-window.innerWidth>160,n=window.outerHeight-window.innerHeight>160;t||n?e||(console.log("%cHOLD UP!","color: yellow; font-size: 24px; font-weight: bold;"),console.log("%cThis site is protected. If you have questions about my work, please feel free to reach out directly.","color: white; font-size: 16px;"),e=!0):e=!1};setInterval(t,1e3),window.addEventListener("keydown",e=>{("F12"===e.key||e.ctrlKey&&e.shiftKey&&["I","J","C"].includes(e.key.toUpperCase()))&&setTimeout(()=>t(),500)})}function runSecurityDeterrents(){try{const e=document.createElement("canvas"),t=e.getContext("2d"),n="Protected by DSR";t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17);e.toDataURL()}catch(e){}}function debounce(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}}function supportsWebGL(){try{const e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}const canvas=document.getElementById("space-canvas");let animationFrameId;function initWebGLSpace(){if("undefined"==typeof THREE)return console.error("Three.js is not loaded. Falling back to 2D."),void init2DFallback();const e=new THREE.Scene;e.fog=new THREE.FogExp2(0,7e-4);const t=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,4e3);t.position.z=10;const n=Math.min(window.devicePixelRatio,c?1.5:2),o=new THREE.WebGLRenderer({canvas:canvas,antialias:!c,alpha:!0,powerPreference:"high-performance"});o.setSize(window.innerWidth,window.innerHeight),o.setPixelRatio(n);let a=0,i=performance.now(),r=60;const s=new THREE.AmbientLight(16777215,.2);e.add(s);const l=new THREE.DirectionalLight(16777215,1.5);l.position.set(5,3,5),e.add(l);const d=[new THREE.PointsMaterial({color:16777215,size:.7,opacity:.8,transparent:!0}),new THREE.PointsMaterial({color:16777215,size:1.5,map:function(){const e=document.createElement("canvas");e.width=64,e.height=64;const t=e.getContext("2d"),n=t.createRadialGradient(32,32,0,32,32,32);return n.addColorStop(0,"rgba(255,255,255,0.8)"),n.addColorStop(.2,"rgba(255,255,255,0.5)"),n.addColorStop(.4,"rgba(200,220,255,0.2)"),n.addColorStop(1,"rgba(200,220,255,0)"),t.fillStyle=n,t.fillRect(0,0,64,64),new THREE.CanvasTexture(e)}(),blending:THREE.AdditiveBlending,transparent:!0,opacity:.5})],c=window.innerWidth<768||navigator.maxTouchPoints>0,u=navigator.hardwareConcurrency<=4,h=c?5e3:u?8e3:15e3,E=c?50:u?100:200,p=new THREE.Points(L(h),d[0]),m=p.clone(),f=new THREE.Points(L(E),d[1]),w=f.clone();p.position.z=0,m.position.z=-2e3,f.position.z=0,w.position.z=-2e3,e.add(p,m,f,w);let g=[],y=[],v=[];const R=new THREE.Clock;let T={planet:0,asteroid:0,constellation:0};const M=25e3,H=35e3,b=7e4;let S=!0;function x(){if(!S)return void(animationFrameId=null);animationFrameId=requestAnimationFrame(x),a++;const s=performance.now();s-i>=1e3&&(r=a,a=0,i=s,r<30&&!c?o.setPixelRatio(Math.min(.75*window.devicePixelRatio,1.5)):r>55&&o.setPixelRatio(n));const l=R.getDelta(),d=R.getElapsedTime();t.position.x=.5*Math.sin(.02*d),t.position.y=.5*Math.cos(.015*d),t.lookAt(0,0,0);const h=c?15:20;p.position.z+=l*h,m.position.z+=l*h,p.position.z>2e3&&(p.position.z-=4e3),m.position.z>2e3&&(m.position.z-=4e3),f.position.z=p.position.z,w.position.z=m.position.z;const E=c?2:u?1.5:1,L=c?1:2,D=c?0:1,F=c?0:1;d>T.planet+M*E/1e3&&(g.length<L&&function(){const t=Math.random();let n;n=t<.4?function(){const e=THREE.MathUtils.randFloat(10,30),t=c?16:32,n=new THREE.SphereGeometry(e,t,t),o=new THREE.CanvasTexture(C("rocky")),a=new THREE.MeshStandardMaterial({map:o,roughness:.8});return new THREE.Mesh(n,a)}():t<.8?function(){const e=THREE.MathUtils.randFloat(40,70),t=c?16:32,n=new THREE.SphereGeometry(e,t,t),o=new THREE.CanvasTexture(C("gas")),a=new THREE.MeshStandardMaterial({map:o,roughness:.9}),i=new THREE.Mesh(n,a);if(Math.random()>.5&&!c){const t=c?32:64,n=new THREE.RingGeometry(1.2*e,1.8*e,t),o=new THREE.MeshBasicMaterial({color:13421772,side:THREE.DoubleSide,transparent:!0,opacity:.4}),a=new THREE.Mesh(n,o);a.rotation.x=Math.random()*Math.PI,i.add(a)}return i}():function(){const e=THREE.MathUtils.randFloat(15,40),t=c?16:32,n=new THREE.SphereGeometry(e,t,t),o=new THREE.CanvasTexture(C("icy")),a=new THREE.MeshStandardMaterial({map:o,roughness:.2,metalness:.1});return new THREE.Mesh(n,a)}();z(n),g.push(n),e.add(n)}(),T.planet=d),d>T.asteroid+H*E/1e3&&(y.length<D&&function(){const t=c?75:150,n=new THREE.Group,o=0,a=new THREE.IcosahedronGeometry(1,o);for(let e=0;e<t;e++){const e=a.clone(),t=e.getAttribute("position"),o=new THREE.Vector3;for(let e=0;e<t.count;e++)o.fromBufferAttribute(t,e),o.x+=.4*Math.random()-.2,o.y+=.4*Math.random()-.2,o.z+=.4*Math.random()-.2,t.setXYZ(e,o.x,o.y,o.z);const i=new THREE.MeshStandardMaterial({color:(new THREE.Color).setHSL(0,0,.3*Math.random()+.2),roughness:.9}),r=new THREE.Mesh(e,i);r.position.set(THREE.MathUtils.randFloatSpread(80),THREE.MathUtils.randFloatSpread(80),THREE.MathUtils.randFloatSpread(80)),r.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),n.add(r)}z(n),y.push(n),e.add(n)}(),T.asteroid=d),d>T.constellation+b*E/1e3&&(v.length<F&&function(){const t=new THREE.Group,n=THREE.MathUtils.randInt(5,10),o=new THREE.MeshBasicMaterial({color:10079487,emissive:10079487,transparent:!0,opacity:.7});for(let e=0;e<n;e++){const e=new THREE.SphereGeometry(.5*Math.random()+.3,8,8),n=new THREE.Mesh(e,o);n.position.set(THREE.MathUtils.randFloatSpread(100),THREE.MathUtils.randFloatSpread(100),0),t.add(n)}z(t),v.push(t),e.add(t)}(),T.constellation=d),[...g,...y,...v].forEach(n=>{n.position.add(n.userData.velocity),n.rotation.y+=n.userData.rotationSpeed,n.position.z>t.position.z+500&&(e.remove(n),g.includes(n)&&(g=g.filter(e=>e!==n)),y.includes(n)&&(y=y.filter(e=>e!==n)),v.includes(n)&&(v=v.filter(e=>e!==n)),n.geometry&&n.geometry.dispose(),n.material&&(Array.isArray(n.material)?n.material.forEach(e=>e.dispose()):n.material.dispose()))}),o.render(e,t)}function L(e){const t=[];for(let n=0;n<e;n++)t.push(THREE.MathUtils.randFloatSpread(2e3)),t.push(THREE.MathUtils.randFloatSpread(2e3)),t.push(THREE.MathUtils.randFloatSpread(2e3));const n=new THREE.BufferGeometry;return n.setAttribute("position",new THREE.Float32BufferAttribute(t,3)),n}function C(e){const t=document.createElement("canvas"),n=c?256:512;t.width=n,t.height=n/2;const o=t.getContext("2d"),a=n/2;if("rocky"===e){const e=(new THREE.Color).setHSL(.1*Math.random()+.05,.5,.4);o.fillStyle=`#${e.getHexString()}`,o.fillRect(0,0,n,a);const t=c?1e3:2e3;for(let e=0;e<t;e++)o.fillStyle=`rgba(0,0,0,${.2*Math.random()})`,o.beginPath(),o.arc(Math.random()*n,Math.random()*a,5*Math.random(),0,2*Math.PI),o.fill()}else if("gas"===e){const e=(new THREE.Color).setHSL(.1*Math.random()+.1,.6,.6),t=(new THREE.Color).setHSL(.1*Math.random()+.05,.5,.5);for(let i=0;i<15;i++)o.fillStyle=i%2==0?`#${e.getHexString()}`:`#${t.getHexString()}`,o.fillRect(0,i*(a/15),n,a/15)}else{const e=(new THREE.Color).setHSL(.1*Math.random()+.55,.8,.8);o.fillStyle=`#${e.getHexString()}`,o.fillRect(0,0,n,a);const t=c?250:500;for(let e=0;e<t;e++)o.fillStyle=`rgba(255,255,255,${.3*Math.random()})`,o.beginPath(),o.arc(Math.random()*n,Math.random()*a,10*Math.random(),0,2*Math.PI),o.fill()}return t}function z(e){e.position.z=THREE.MathUtils.randFloat(-3e3,-4e3),e.position.x=THREE.MathUtils.randFloatSpread(1500),e.position.y=THREE.MathUtils.randFloatSpread(800),e.userData.velocity=new THREE.Vector3(0,0,THREE.MathUtils.randFloat(1.5,4)),e.userData.rotationSpeed=.005*Math.random()}document.addEventListener("visibilitychange",()=>{S=!document.hidden,S&&null===animationFrameId&&x()}),x(),window.addEventListener("resize",debounce(()=>{t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)},250))}function init2DFallback(){const e=canvas.getContext("2d");let t=Array.from({length:600},()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,radius:1.5*Math.random(),alpha:Math.random(),speed:.2*Math.random()+.1}));function n(){canvas.width=window.innerWidth,canvas.height=window.innerHeight,t.forEach(e=>{e.x=Math.random()*canvas.width,e.y=Math.random()*canvas.height})}n(),function n(){animationFrameId=requestAnimationFrame(n),e.clearRect(0,0,canvas.width,canvas.height),e.fillStyle="rgba(255, 255, 255, 0.8)",t.forEach(t=>{t.y-=t.speed,t.y<0&&(t.y=canvas.height,t.x=Math.random()*canvas.width),e.globalAlpha=t.alpha,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI),e.fill()}),e.globalAlpha=1}(),window.addEventListener("resize",debounce(n,250))}function initializeApp(){try{calculateExperience(),setupScratchCards(),setupQuizModal(),setupDevToolsDetection(),runSecurityDeterrents(),document.addEventListener("contextmenu",e=>e.preventDefault());let n=!1;function e(){n||(n=!0,"undefined"!=typeof THREE&&supportsWebGL()?initWebGLSpace():init2DFallback())}const o=["click","touchstart","scroll","mousemove"];let a=!1;function t(){a||(a=!0,o.forEach(e=>{document.removeEventListener(e,t)}),e())}if(o.forEach(e=>{document.addEventListener(e,t,{passive:!0,once:!0})}),setTimeout(()=>{a||e()},3e3),"undefined"!=typeof THREE&&supportsWebGL());else if("undefined"==typeof THREE){const i=setInterval(()=>{"undefined"!=typeof THREE&&(clearInterval(i),supportsWebGL()?initWebGLSpace():(console.warn("WebGL not supported, falling back to 2D canvas animation."),init2DFallback()))},100);setTimeout(()=>{clearInterval(i),"undefined"==typeof THREE&&(console.warn("Three.js failed to load, using 2D canvas animation."),init2DFallback())},3e3)}else console.warn("WebGL not supported, falling back to 2D canvas animation."),init2DFallback();"undefined"!=typeof AOS&&AOS.init({duration:800,once:!0,offset:50,easing:"ease-out-cubic"})}catch(r){console.error("An error occurred during initialization:",r),document.body.style.backgroundColor="#020204"}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initializeApp):initializeApp();